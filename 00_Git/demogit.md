# Практический пример работы с Git

Задача: подключится к уже существующему проекту и внести изменения.

## Подключение к аккаунту на гите

Проверяем имя пользователя в текущем аккаунте гита `git config user.name` и меняем, если необходимо `git config --global user.name "Ваше Имя"`.

Проверяем текущее имя пользователя гита `git config user.email` и меняем, если необходимо `git config --global user.email "ваш@адрес.почты"`.

Переходим в рабочую папку `cd /путь/к/вашему/локальному/репозиторию`, проверяем что в ней `ls`.

Используйте команду git remote add, чтобы связать ваш локальный репозиторий с удаленным. Вам нужно будет указать имя (обычно origin) и URL удаленного репозитория `git remote add origin https://github.com/devops-from-root/devops-from-root.git`.

Если репозиторий уже подключен, то `git remote -v` выдаст информацию:
```
origin  https://github.com/devops-from-root/devops-from-root.git (fetch)
origin  https://github.com/devops-from-root/devops-from-root.git (push)
```
## Вносим изменения в репозиторий

Создаём подпапку `mkdir 00_Git`, добавляем её к отслеживанию `git add 00_Git/` и переходим в неё `cd 00_Git`.

Содаём файл `echo "## Демонстрация работы с Git и GitHub" > git_demo.md`, проверяем статус `git status` и добавляем новый файл к отслеживанию `git add git_demo.md`.

Делаем первый коммит и добавляем в staging все отслеживаемые файлы `git commit -am "Создана папка 00_Git с файлом git_demo.md"`.

Проверяем, что коммит есть в истории `git log`. Смотрим информацию о последнем коммите `git show`.

## Создаём коммиты

Добавляем вторую строку в файл `echo "[![back](https://img.shields.io/badge/назад-646464)](demogit.md)" >> git_demo.md`. Проверяем статус `git status`. Смотрим непроиндексированные изменения `git diff` и сверяем с закэшированным результатом `git diff --cached`.

Создадим коммит `git commit -am "Добавлена кнопка назад"` и проверим лог `git log`.

Была сделана ошибка, в файле **git_demo.md** не хватает пустой строки между заголовком и ссылкой. Открываем этот файл в любимом редакторе и вносим исправления вручную, добавив ещё одну ссылку:
```
## Демонстрация работы с Git и GitHub

[![back](https://img.shields.io/badge/назад-646464)](demogit.md)
[![home](https://img.shields.io/badge/оглавление-646464)](README.md)
``` 

Добавляем изменения в **stage** `git add git_demo.md`. Добавляем обновленный **stage** и изменяем коммит `git commit --amend`. Проверяем лог `git log` что коммит переименовался. Проверяем изменения `git show`.

Добавим ещё одну строку в файл **git_demo.md**, из коммандной строки `echo "## Конец" >> git_demo.md`. Создадим коммит `git commit -am "Добавлен конец"`. Проверяем лог `git log` и изменения `git show`.

## Отменяем коммиты

Можно вычислить хеш последнего коммита `git log` и использовать `git revert 1234567`, подставив первые 7 цифр хеша. Для отмены последнего можно использовать `git revert HEAD~1`.

## Решение конфликтов

После возврата к предыдущему комиту должен возникнуть конфликт. Проверяем где он произошёл `git status` и выводим изменения в файле командой `cat git_demo.md`:
```
## Демонстрация работы с Git и GitHub

[![back](https://img.shields.io/badge/назад-646464)](demogit.md)
[![home](https://img.shields.io/badge/оглавление-646464)](README.md)
## Конец
```

Строки в которых произошёл конфликт гит помечает специальными маркерами. Чтобы найти строки, которые нужно удалить для решения конфликта `git show HEAD~1`:
```
@@ -1 +1,4 @@
 ## Демонстрация работы с Git и GitHub
+
+[![back](https://img.shields.io/badge/назад-646464)](demogit.md)
+[![home](https://img.shields.io/badge/оглавление-646464)](README.md)
```
Сообщим гиту что мы разрешили конфликт `git add git_demo.md`

## Отправка

Отправим на гитхаб текущее состояние `git push` и получим `git pull`.


[![back](https://img.shields.io/badge/в_начало-646464)](../README.md)